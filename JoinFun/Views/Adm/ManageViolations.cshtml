@model JoinFun.ViewModel.AdmView
@{
    ViewBag.Title = "違規管理";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

<h2 class="text-warning text-center mt-4 mb-4">違規管理</h2>

<div class="tab-content">
    <input id="load" type="hidden" value="@ViewBag.ID" />
    <div class="tab-pane fade show" id="memList">
        <table class="table table-striped table-hover table-responsive-sm">
            <caption>會員違規列表</caption>
            <thead class="thead-dark text-center">
                <tr>
                    <th scope="col">違規編號</th>
                    <th scope="col">檢舉人</th>
                    <th scope="col">違規類別</th>
                    <th scope="col">違規標題</th>
                    <th scope="col">違規時間</th>
                </tr>
            </thead>
            <tbody class="text-center">
                @if (Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("M")) != null)
                {
                    foreach (var item in Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("M")))
                    {
                        <tr class="table-warning">
                            <td>
                                @item.vioId
                                @*<input id="vioID1" type="hidden" name="vioID" value="@item.vioId" />*@
                            </td>
                            <td>
                                @if (Model.violateList != null)
                                {
                                    foreach (var m in Model.memList.Where(x => x.memId == item.FromMemId))
                                    {
                                        @m.memNick
                                    }
                                }
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CorrespondingEventID)
                                @*<input id="eventID1" type="hidden" name="eventID" value="@item.CorrespondingEventID" />*@
                            </td>
                            <td>
                                @*<button id="memViolate" type="button" class="btn btn-link">@item.vioTitle</button>*@
                                @*<a href="@Url.Action("ViolationContent", "Adm", new { vioID = item.vioId, eventID = item.CorrespondingEventID})">@item.vioTitle</a>*@
                                @*@Html.ActionLink(item.vioTitle, "ViolationContent", new { vioID = item.vioId, Page = ViewBag.ID }, new { @class = "btn btn-link" })*@
                                <form method="get" action="@Url.Action("ViolationContent")">
                                    <input id="vioID" name="vioID" type="hidden" value="@item.vioId" />
                                    <input id="Page" name="Page" type="hidden" value="memList" />
                                    <input id="vioContent" type="submit" value="@item.vioTitle" class="btn btn-link" />
                                </form>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.vioReportTime)
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="remarkList">
        <table class="table table-striped table-hover table-responsive-sm">
            <caption>不實評價列表</caption>
            <thead class="thead-dark text-center">
                <tr>
                    <th>違規編號</th>
                    <th>檢舉人</th>
                    <th>違規類別</th>
                    <th>違規標題</th>
                    <th>違規時間</th>
                </tr>
            </thead>
            <tbody class="text-center">
                @if (Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("R")) != null)
                {
                    foreach (var item in Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("R")))
                    {
                        <tr class="table-primary">
                            <td>
                                @item.vioId
                                @*<input id="vioID1" type="hidden" name="vioID1" value="@item.vioId" />*@
                            </td>
                            <td>
                                @if (Model.violateList != null)
                                {
                                    foreach (var m in Model.memList.Where(x => x.memId == item.FromMemId))
                                    {
                                        @m.memNick
                                    }
                                }
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CorrespondingEventID)
                                @*<input id="eventID1" type="hidden" name="eventID1" value="@item.CorrespondingEventID" />*@
                            </td>
                            <td>
                                @*<button id="memViolate" type="button" class="btn btn-link">@item.vioTitle</button>*@
                                @*<a href="@Url.Action("ViolationContent", "Adm", new { vioID = item.vioId, Page = ViewBag.ID})">@item.vioTitle</a>*@
                                <form method="get" action="@Url.Action("ViolationContent")">
                                    <input id="vioID" name="vioID" type="hidden" value="@item.vioId" />
                                    <input id="Page" name="Page" type="hidden" value="remarkList" />
                                    <input id="vioContent" type="submit" value="@item.vioTitle" class="btn btn-link" />
                                </form>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.vioReportTime)
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="actList">
        <table class="table table-striped table-hover table-responsive-sm">
            <caption>違規活動列表</caption>
            <thead class="thead-dark text-center">
                <tr>
                    <th>違規編號</th>
                    <th>檢舉人</th>
                    <th>違規類別</th>
                    <th>違規標題</th>
                    <th>違規時間</th>
                </tr>
            </thead>
            <tbody class="text-center">
                @if (Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("A")) != null)
                {
                    foreach (var item in Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("A")))
                    {
                        <tr class="table-info">
                            <td>
                                @item.vioId
                                @*<input id="vioID1" type="hidden" name="vioID1" value="@item.vioId" />*@
                            </td>
                            <td>
                                @if (Model.violateList != null)
                                {
                                    foreach (var m in Model.memList.Where(x => x.memId == item.FromMemId))
                                    {
                                        @m.memNick
                                    }
                                }
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CorrespondingEventID)
                                @*<input id="eventID1" type="hidden" name="eventID1" value="@item.CorrespondingEventID" />*@
                            </td>
                            <td>
                                @*<button id="memViolate" type="button" class="btn btn-link">@item.vioTitle</button>*@
                                @*<a href="@Url.Action("ViolationContent", "Adm", new { vioID = item.vioId, Page = ViewBag.ID})">@item.vioTitle</a>*@
                                <form method="get" action="@Url.Action("ViolationContent")">
                                    <input id="vioID" name="vioID" type="hidden" value="@item.vioId" />
                                    <input id="Page" name="Page" type="hidden" value="actList" />
                                    <input id="vioContent" type="submit" value="@item.vioTitle" class="btn btn-link" />
                                </form>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.vioReportTime)
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="commentList">
        <table class="table table-striped table-hover table-responsive-sm">
            <caption>不當留言列表</caption>
            <thead class="thead-dark text-center">
                <tr>
                    <th>違規編號</th>
                    <th>檢舉人</th>
                    <th>違規類別</th>
                    <th>違規標題</th>
                    <th>違規時間</th>
                </tr>
            </thead>
            <tbody class="text-center">
                @if (Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("B")) != null)
                {
                    foreach (var item in Model.violateList.Where(m => m.CorrespondingEventID.StartsWith("B")))
                    {
                        <tr class="table-success">
                            <td>
                                @item.vioId
                                @*<input id="vioID1" type="hidden" name="vioID1" value="@item.vioId" />*@
                            </td>
                            <td>
                                @if (Model.violateList != null)
                                {
                                    foreach (var m in Model.memList.Where(x => x.memId == item.FromMemId))
                                    {
                                        @m.memNick
                                    }
                                }
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CorrespondingEventID)
                                @*<input id="eventID1" type="hidden" name="eventID1" value="@item.CorrespondingEventID" />*@
                            </td>
                            <td>
                                @*<button id="memViolate" type="button" class="btn btn-link">@item.vioTitle</button>*@
                                @*<a href="@Url.Action("ViolationContent", "Adm", new { vioID = item.vioId, Page = ViewBag.ID})">@item.vioTitle</a>*@
                                <form method="get" action="@Url.Action("ViolationContent")">
                                    <input id="vioID" name="vioID" type="hidden" value="@item.vioId" />
                                    <input id="Page" name="Page" type="hidden" value="commentList" />
                                    <input id="vioContent" type="submit" value="@item.vioTitle" class="btn btn-link" />
                                </form>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.vioReportTime)
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
@section topCSS{
    <link href="~/Content/MyStyle.css" rel="stylesheet" />
}

@section scripts{
    <script>
        $(document).ready(function () {
            var loading = $('#load').val();
            $('#vioArea').show();
            $('#' + loading).addClass('show').addClass('active');
        });''

    </script>
}