@model JoinFun.Models.Acc_Pass

@{
    ViewBag.Title = "修改密碼";
}


    <div class="container mt-5">
        <h2 class="text-center">修改密碼</h2>
        <div style="height:800px" class="row justify-content-center">



            @using (Html.BeginForm(new { id = "pwdEdit" }))
            {
                @Html.AntiForgeryToken()

            <div class="form-horizontal" style="min-height:750px">


                @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })*@
                @*@Html.HiddenFor(model => model.Account)*@
                <div class="row mt-3">
                    <div class=" col col-md-12 ">
                        <div class=" form-inline ">

                            @*@Html.LabelFor(model => model.memId, htmlAttributes: new { @class = "control-label col-md-2" })*@
                            <span class="control-label  ml-auto mr-2 ">會員編號</span>
                            @*<input id="memId" name="memId" type="text" class="form-control" value="@Model.memId" readonly />*@
                            @Html.EditorFor(model => model.memId, new { htmlAttributes = new { @class = "form-control mr-auto ", @readonly = "readonly" } })
                            @Html.ValidationMessageFor(model => model.memId, "", new { @class = "text-danger" })


                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class=" col col-md-12 ">
                        <div class=" form-inline ">
                            @Html.LabelFor(model => model.Account, htmlAttributes: new { @class = "control-label  ml-auto mr-2" })
                            @Html.EditorFor(model => model.Account, new { htmlAttributes = new { @class = "form-control  mr-auto", @readonly = "readonly"} })
                            @Html.ValidationMessageFor(model => model.Account, "", new { @class = "text-danger" })

                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class=" col col-md-12 ">
                        <div class=" form-inline ">

                            <span class="control-label  ml-auto mr-2">舊密碼&nbsp;&nbsp;&nbsp;</span>

                            <input id="OldPassword" name="OldPassword" type="password" class="form-control mr-auto" />
                            <div></div>
                        </div>
                    </div>
                </div>



                <div class="row mt-3">
                    <div class=" col col-md-12 ">
                        <div class=" form-inline ">
                            <span class="control-label  ml-auto mr-2">新密碼&nbsp;&nbsp;&nbsp;</span>

                            <input id="NewPassword" name="NewPassword" type="password" class="form-control mr-auto" />
                            <div class="text-center"></div>

                        </div>
                    </div>
                </div>



                <div class="row  mt-3 ">
                    <div class=" col col-md-12 ">
                        <div class=" form-inline ">
                            <span class="control-label  ml-auto mr-2 ">確認密碼</span>

                            <input id="PasswordConfirm" name="PasswordConfirm" type="password" class="form-control mr-auto " />
                            <div></div>

                        </div>
                    </div>
                </div>

                <h5 class="text-danger">@ViewBag.PwdEditErr</h5>

                <div class="row  mt-3 ">
                    <div class=" col col-md-11 offset-3">


                        <input type="submit" value="儲存" class="btn btn-success  w-75 " />
                                     
                        @Html.ActionLink("返回我的資訊", "Info", "Member", new { @class = "btn btn-outline-info  w-75 mt-3" })
                    </div>


                </div>
            </div>

            }

        </div>
    </div>



<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
@section scripts{
    <script>
        var flag = false;

        $('#pwdEdit').submit(function () {

            if ($('#OldPassword').val() == "") {
                $('#OldPassword').addClass("is-invalid");
                $('#OldPassword~div').addClass("invalid-feedback").text('請輸新密碼!');
                flag = false;
            }
            if ($('#NewPassword').val() == "") {
                $('#NewPassword').addClass("is-invalid");
                $('#NewPassword~div').addClass("invalid-feedback").text('請輸入新密碼!');
                flag = false;
            }

            if ($('#PasswordConfirm').val() == "") {
                $('#PasswordConfirm').addClass("is-invalid");
                $('#PasswordConfirm~div').addClass("invalid-feedback").text('請再次確認密碼');
                flag = false;
            }

            if (!flag)
                return false;

            return true;
        });


        //$('#OldPassword').keyup(function () {
        //    if ($('#OldPassword').val().length < 8) {
        //        $('#OldPassword').addClass("is-invalid");
        //        $('#OldPassword~div').addClass("invalid-feedback").text('至少8個字元!!');
        //        flag = false;
        //    }
        //    else {
        //        $('#OldPassword').removeClass('is-invalid').addClass("is-valid");
        //        $('#OldPassword~div').removeClass("invalid-feedback").addClass("valid-feedback").text('OK');
        //        flag = true;
        //    }
        //});

        $('#NewPassword').keyup(function () {
            if ($('#NewPassword').val().length < 8) {
                $('#NewPassword').addClass("is-invalid");
                $('#NewPassword~div').addClass("invalid-feedback").text('至少8個字元!!');
                flag = false;
            }
            else {
                $('#NewPassword').removeClass('is-invalid').addClass("is-valid");
                $('#NewPassword~div').removeClass("invalid-feedback").addClass("valid-feedback").text('OK');
                flag = true;
            }
        });


    </script>


}